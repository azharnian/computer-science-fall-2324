!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="30dc121c-8567-40ae-9c63-c8ce4f1f4719",e._sentryDebugIdIdentifier="sentry-dbid-30dc121c-8567-40ae-9c63-c8ce4f1f4719")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"468e0ce18ce8eaa072d85361b0e2c2d814ed5dca"},(window.webpackJsonp=window.webpackJsonp||[]).push([[121],{"1oHX":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n("fom2"),i=n("iInd"),a=n("RAuf"),s=n("8Y7J");let o=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.Yb({type:e}),e.\u0275inj=s.Xb({providers:[a.a],imports:[[r.a,i.k]]}),e})()},VKVi:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("8Y7J");let i=(()=>{class e{transform(e,t,n){return e.replace(t,n)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.Zb({name:"replace",type:e,pure:!0}),e})()},bhCW:function(e,t,n){"use strict";n.r(t),n.d(t,"HDBuyPageModule",function(){return Y});var r=n("fom2"),i=n("iInd"),a=n("1AB1"),s=n("Qyzw"),o=n("SVse"),c=n("HAGt"),l=n("XkIO"),u=n("x2i3"),d=n("VkX0"),h=n("8Y7J"),f=n("ShgS"),p=n("mFZi"),g=n("0lwZ"),y=n("sfMR"),m=n("cUpR"),v=n("Ln8c"),b=n("elcc"),w=n("uJV5"),C=n("UNx2"),S=n("7U3Y"),_=n("K2ze");const k=["mainRenderArea"];function B(e,t){if(1&e){const e=h.hc();h.gc(0,"app-headless-sub-nav",8),h.oc("pathChange",function(t){return h.Sc(e),h.sc().handleHeadlessPathChange(t)}),h.fc()}if(2&e){const e=h.sc();h.Bc("subNav",e.subNav)("knownHeadlessUrls",e.knownHeadlessUrls)("isBuyPage",!0)}}function N(e,t){1&e&&(h.gc(0,"app-loading",9),h.rc(),h.bc(1,"rect",10),h.bc(2,"rect",11),h.bc(3,"rect",12),h.fc()),2&e&&h.Bc("height",60)("width",200)("primaryColor","#dddddd")}function x(e,t){if(1&e&&h.bc(0,"headless-cta-component",13),2&e){const e=h.sc();h.Bc("input",e.ctaContent)}}function T(e,t){1&e&&h.bc(0,"app-not-found-page")}const U={"paragraph--content_box":c.a,"webform--webform":l.a,"paragraph--support_container":u.a,"banner--page-banner":d.a};let I=(()=>{class e{constructor(e,t,n,r,i,s,o,c,l,u,d,h,f){this.document=e,this.isPlatformServer=t,this.drupalJsonApi=n,this.drupalMetaService=r,this.renderer=i,this.injector=s,this.viewContainer=o,this.router=c,this.location=l,this.vaUtil=u,this.util=d,this.transferState=h,this.subNavService=f,this.hideStructureTree=!0,this.knownHeadlessUrls=new a.a,this.viewInit=!1,this.treeFetched=!1,this.pageNotFound=!1}ngOnInit(){let e=this.router.url.split("?")[0];e=e.split("#")[0],this.getPageByUrl(e)}getPageByUrl(e){if(this.treeFetched=!1,this.pageNotFound=!1,!this.isPlatformServer&&this.transferState.hasKey(e)){const t=this.transferState.get(e,null);if(this.transferState.remove(e),t)return console.log("ssr found",e),this.treeFetched=!0,this.drupalElementTree=t,void(this.viewInit&&this.renderFromTree(t))}this.drupalJsonApi.getStaticContentByPath(e).then(t=>{if(this.treeFetched=!0,this.drupalElementTree=t,this.isPlatformServer)return this.drupalMetaService.refreshMetaLinks(t),void this.transferState.set(e,t);t?this.viewInit&&this.renderFromTree(t):this.pageNotFound=!0}).catch(e=>{var t;if(!this.isPlatformServer)if(e.status>=300&&e.status<400&&(null===(t=e.error)||void 0===t?void 0:t.location)){const t=this.drupalJsonApi.stripBaseHref(e.error.location);this.router.navigateByUrl(t)}else console.error("getStaticContentByPath error",e),this.treeFetched=!0,this.pageNotFound=!0})}ngAfterViewInit(){this.viewInit=!0,this.treeFetched&&this.drupalElementTree&&this.renderFromTree(this.drupalElementTree)}renderFromTree(e){var t,n,r,i,a,s,o,c;if(!e)return;e.field_meta_tags&&this.drupalMetaService.addMetaTagsFromHeadlessDrupal(e.field_meta_tags),this.drupalMetaService.refreshMetaLinks(e);let l=e.children.field_content_box_b;this.subNav=this.drupalJsonApi.getSubMenuFromTree(e);const u=null===(t=this.subNav)||void 0===t?void 0:t.title;this.subNavService.setSubNavTitle(u),this.drupalJsonApi.renderFromTree(l,this.renderer,this.mainRenderArea.nativeElement,U,this.injector,this.viewContainer),this.ctaContent=e.children.field_cta?e.children.field_cta[0]:null,this.router.url.includes("face-masks/iqair-mask/buy")&&!this.isPlatformServer&&setTimeout(()=>{this.util.loadScript("assets/iqair/js/bootstrap.bundle.min.js",{replace:!0,async:!1,defer:!1,tag:"body"}),this.util.loadScript("assets/iqair/js/popover.js",{replace:!0,tag:"body"})},1e3),((null===(r=null===(n=null==e?void 0:e.children)||void 0===n?void 0:n.field_products)||void 0===r?void 0:r.length)>0||(null===(c=null===(o=null===(s=null===(a=null===(i=null==e?void 0:e.children)||void 0===i?void 0:i.field_products_set)||void 0===a?void 0:a[0])||void 0===s?void 0:s.children)||void 0===o?void 0:o.field_products)||void 0===c?void 0:c.length)>0)&&this.drupalMetaService.getStructuredData(null==e?void 0:e.children)}handleHeadlessPathChange(e){const t=this.mainRenderArea.nativeElement,n=t.children;for(let r of n)this.renderer.removeChild(t,r);this.location.go(e),this.document.body.scrollTop=0,this.document.documentElement.scrollTop=0,this.treeFetched=!1,this.getPageByUrl(e)}}return e.\u0275fac=function(t){return new(t||e)(h.ac(o.d),h.ac(s.c),h.ac(f.a),h.ac(p.a),h.ac(h.N),h.ac(h.w),h.ac(h.Z),h.ac(i.g),h.ac(o.j),h.ac(g.a),h.ac(y.a),h.ac(m.f),h.ac(v.a))},e.\u0275cmp=h.Ub({type:e,selectors:[["app-hd-buy-page"]],viewQuery:function(e,t){if(1&e&&h.md(k,1),2&e){let e;h.Nc(e=h.pc())&&(t.mainRenderArea=e.first)}},decls:10,vars:4,consts:[["rel","stylesheet","href","/assets/css/iqair-override.css","media","all"],[3,"subNav","knownHeadlessUrls","isBuyPage","pathChange",4,"ngIf"],[1,"iqair-page","kat-hdp"],[3,"height","width","primaryColor",4,"ngIf"],[1,"main","main-render-area"],["mainRenderArea",""],[3,"input",4,"ngIf"],[4,"ngIf"],[3,"subNav","knownHeadlessUrls","isBuyPage","pathChange"],[3,"height","width","primaryColor"],["x","70","y","13","rx","1","ry","1","width","60","height","6"],["x","60","y","22","rx","1","ry","1","width","80","height","6"],["x","75","y","30","rx","1","ry","1","width","50","height","3"],[3,"input"]],template:function(e,t){1&e&&(h.bc(0,"link",0),h.bc(1,"app-country-location-redirect-banner"),h.dd(2,B,1,3,"app-headless-sub-nav",1),h.bc(3,"page-banner"),h.gc(4,"div",2),h.dd(5,N,4,3,"app-loading",3),h.bc(6,"div",4,5),h.dd(8,x,1,1,"headless-cta-component",6),h.dd(9,T,1,0,"app-not-found-page",7),h.fc()),2&e&&(h.Mb(2),h.Bc("ngIf",t.subNav),h.Mb(3),h.Bc("ngIf",!t.treeFetched),h.Mb(3),h.Bc("ngIf",t.ctaContent),h.Mb(1),h.Bc("ngIf",t.pageNotFound))},directives:[b.a,o.o,d.a,w.a,C.a,S.a,_.a],styles:[""]}),e})();const P=[{path:"personal-air-purifiers/:series/buy",component:I},{path:"room-air-purifiers/:series/buy",component:I},{path:"commercial/compact-stand-alone-air-filtration/:series/buy",component:I},{path:"whole-house-air-purifiers/perfect16/buy",component:I}];let A=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Yb({type:e}),e.\u0275inj=h.Xb({imports:[[i.k.forChild(P)],i.k]}),e})();var M=n("n+EO"),H=n("sJRQ"),R=n("KOaI"),F=n("6lsu"),E=n("Ak+M"),O=n("IgGT"),L=n("Hph+"),J=n("m/XY"),D=n("1oHX");let Y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=h.Yb({type:e}),e.\u0275inj=h.Xb({providers:[H.a],imports:[[R.a,A,r.a,F.a,E.a,O.a,L.a,M.NotFoundPageModule,J.a,D.a]]}),e})()},elcc:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var r=n("Qyzw"),i=n("BPAf"),a=n("ufs1"),s=n("8Y7J"),o=n("uK2+"),c=n("iInd"),l=n("RAuf"),u=n("SVse"),d=n("VKVi");function h(e,t){if(1&e){const e=s.hc();s.ec(0),s.gc(1,"div",1),s.gc(2,"span"),s.fd(3),s.tc(4,"replace"),s.gc(5,"a",2),s.oc("click",function(){return s.Sc(e),s.sc().setSelectedCountry()})("contextmenu",function(e){return null==e?null:e.preventDefault()}),s.fd(6),s.tc(7,"replace"),s.fc(),s.fc(),s.gc(8,"div",3),s.oc("click",function(){return s.Sc(e),s.sc().dismissBanner()}),s.fd(9),s.fc(),s.fc(),s.bc(10,"div",4),s.dc()}if(2&e){const e=s.sc();s.Mb(3),s.hd(" ",s.wc(4,4,null==e.trans?null:e.trans.text,"{country}",e.translatedUserCountry)," "),s.Mb(2),s.Bc("href",e.redirectUrl,s.Vc),s.Mb(1),s.hd(" ",s.wc(7,8,null==e.trans?null:e.trans.linkText,"{country}",e.translatedUserCountry)," "),s.Mb(3),s.hd(" ",null==e.trans?null:e.trans.stayHere," ")}}let f=(()=>{class e{constructor(e,t,n,r,i,s,o){this.isBrowser=e,this.userPref=t,this.websiteService=n,this.router=r,this.route=i,this.host=s,this.langUtilService=o,this.COUNTRY_LOCATION_REDIRECT_BANNER_TRANS=a.a,this.baseHref=this.websiteService.getBaseHref()}ngOnInit(){this.isBrowser&&(this.setTranslationLanguage(),this.setUserCountry(),this.checkShowCheckCountryBanner())}ngOnDestroy(){}setTranslationLanguage(){this.translationLanguage=this.getTranslationLanguage()}setUserCountry(){var e,t;this.userCountry=null===(t=null===(e=this.userPref)||void 0===e?void 0:e.country)||void 0===t?void 0:t.name,this.translatedUserCountry=this.langUtilService.translateCountryName(this.translationLanguage,this.userCountry)}checkShowCheckCountryBanner(){const{show:e,countryHref:t,countryName:n}=this.getShowBannerAndCountryHref();this.showBanner=e,this.showBanner&&(this.suggestedCountryName=n,this._setRedirectUrl(t),this._setTranslatedContent())}setSelectedCountry(){"undefined"!=typeof localStorage?localStorage.selectedCountry=this.suggestedCountryName:console.error("Could not set localStorage country")}getShowBannerAndCountryHref(){if(!this.userCountry)return console.debug("[CountryLocationRedirectBannerComponent]: User`s location country is null. Banner won`t be shown"),{show:!1,countryHref:"",countryName:""};const e=this.langUtilService.getCountryFromCookies(),t=this.langUtilService.getSelectedCountryName(),n=this.langUtilService.getCountryInfo(this.translationLanguage,e);if(n){const r=this.langUtilService.getDefaultCountryBaseHrefs(n.name),i=r[0];if(t!==e||this._isOnWrongCountryPage(r))return{show:!0,countryHref:i,countryName:n.name}}return{show:!1,countryHref:"",countryName:""}}_isOnWrongCountryPage(e){return null==e.find(e=>e===this.baseHref)}getTranslationLanguage(){return this.langUtilService.getBrowserTranslationLanguage()}_setRedirectUrl(e){const t=this.router.url;this.redirectUrl=e?`/${e}${t}`:t}_setTranslatedContent(){this.trans=this.COUNTRY_LOCATION_REDIRECT_BANNER_TRANS[this.translationLanguage]}dismissBanner(){this.host.nativeElement.remove()}}return e.\u0275fac=function(t){return new(t||e)(s.ac(r.b),s.ac(i.b),s.ac(o.a),s.ac(c.g),s.ac(c.a),s.ac(s.o),s.ac(l.a))},e.\u0275cmp=s.Ub({type:e,selectors:[["app-country-location-redirect-banner"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"country-location-check"],[1,"country-location-check__link",3,"href","click","contextmenu"],[1,"country-location-check__stay-here",3,"click"],[1,"country-location-check__padding"]],template:function(e,t){1&e&&s.dd(0,h,11,12,"ng-container",0),2&e&&s.Bc("ngIf",t.showBanner)},directives:[u.o],pipes:[d.a],styles:[".country-location-check[_ngcontent-%COMP%]{background-color:#1470f6;width:100vw;height:55px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;color:#fff;position:fixed;z-index:10;padding-top:2px;padding-bottom:2px}.country-location-check__link[_ngcontent-%COMP%]{text-decoration:underline!important;text-underline-offset:1px;color:#fff;margin-left:4px}.country-location-check__link[_ngcontent-%COMP%]:hover{color:#eef2f6}.country-location-check__stay-here[_ngcontent-%COMP%]{text-decoration:underline!important;text-underline-offset:1px;cursor:pointer;margin-top:2px}.country-location-check__padding[_ngcontent-%COMP%]{height:55px}"]}),e})()}}]);